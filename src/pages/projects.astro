---
import '../styles/main.css';
import { getCollection } from 'astro:content';
import Project from '../components/Project.astro';
import BaseLayout from '../layouts/BaseLayout.astro';

const title = 'Projects';
const description = 'Things that I work on.';
const permalink = Astro.site?.href as string;

const projects = await getCollection('projects');
const sortedProjects = projects.sort((a, b) => {
  if (a.id < b.id) {
    return -1;
  }
  if (a.id > b.id) {
    return 1;
  }
  return 0;
});
---

<BaseLayout title={title} description={description} permalink={permalink}>
  <div class="size-full flex justify-center">
    <div class="flex flex-col w-full max-w-3xl p-4">
      {sortedProjects.map((project) => <Project project={project} />)}
    </div>
  </div>
</BaseLayout>
